<html>
	
<head>
	<title>DirectDraw Surface handling</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="HelpNDoc Personal Edition 4.6.2.573">
	<meta name="keywords" content="">
	
	<link type="text/css" rel="stylesheet" media="all" href="css/reset.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/base.css" />
	<link type="text/css" rel="stylesheet" media="all" href="css/hnd.css" />
	<!--[if lte IE 8]>
		<link type="text/css" rel="stylesheet" media="all" href="css/ielte8.css" />
	<![endif]-->
	<style type="text/css">
		#topic_header
		{
			background-color: #EFEFEF;
		}
	</style>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/hnd.js"></script>
	<script type="text/javascript">
		$(document).ready(function()
		{
			if (top.frames.length == 0)
			{
				var sTopicUrl = top.location.href.substring(top.location.href.lastIndexOf("/") + 1, top.location.href.length);
				top.location.href = "DxWnd.html?" + sTopicUrl;
			}
			else if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
			{
				top.FrameTOC.SelectTocItem("DirectDrawSurfacehandling");
			}
		});
	</script>
	
	</head>

<body>

<div id="topic_header">
			<div id="topic_header_content">
				<h1 id="topic_header_text">DirectDraw Surface handling</h1>
				
				<div id="topic_breadcrumb">
					<a href="Theconfigurationpanel.html">The configuration panel</a> &rsaquo;&rsaquo; <a href="DirectX.html">DirectX</a> &rsaquo;&rsaquo; </div>
				</div>
			<div id="topic_header_nav">
				<a href="DirectX.html"><img src="img/arrow_up.png" alt="Parent"/></a>
				
				<a href="Emulation.html"><img src="img/arrow_left.png" alt="Previous"/></a>
				
				<a href="Libs.html"><img src="img/arrow_right.png" alt="Next"/></a>
				
				</div>
			<div class="clear"></div>
		</div>
	<div id="topic_content">
		
<p></p>
<p class="rvps3"><span class="rvts8">Auto primary surface refresh: Some badly programmed games (namely the "Cossaks" series) don't follow the specification to blit changes on screen, they just get the primary surface memory address and keep writing there. The option forces a periodic blitting of the primary surface on screen even if the game doesn't request it. You want a second example? It has not been easy to find, but "Crush! Deluxe" suffers the same problem.</span></p>
<p class="rvps3"><span class="rvts8">VIDEO → SYSTEM Surface on fail: When this option is set and a CreateSurface fails because of video memory shortage, DxWnd backs this up by creating the surface on memory. &nbsp;Oddly enough, some games expect to notice this by themselves and work correctly only when the option is NOT set.</span></p>
<p class="rvps3"><span class="rvts8">Suppress DX common errors: Some games running in windowed mode generate sporadic errors that wouldn't prevent the game to work, but terminate the application. This option makes directx methods return OK condition in such common cases.</span></p>
<p class="rvps3"><span class="rvts8">Make Backbuf attachable: Alters the size specification of the created backbuffer so that it copes with the actual primary surface, so that it may be attachable to a ZBUFFER surface. It makes “Dave Mirra Freestyle BMX” playable.</span></p>
<p class="rvps3"><span class="rvts8">Blit from Backbuffer: Some games (the Sims, the only one so far....) read graphic data from the primary surface. When the game runs windowed, the approximation introduced in a scaled window brings cumulative error that appear as a progressive "smearing" effect. In this case, it might be better to read the data from the backbuffer surface that is not scaled, even if in such a way you get other troubles when scrolling (see it by yourself...). The only reasonable alternative: write game code in a better way, in my opinion!</span></p>
<p class="rvps3"><span class="rvts8">Compensate Flip emulation: </span></p>
<p class="rvps3"><span class="rvts8">Suppress clipping: DxWnd sets clipping on the primary surface. If the game does it as way, there might be interferences. As a matter of fact, setting this flag is the only way to make "Pax Imperia Eminent Domain" working correctly.</span></p>
<p class="rvps3"><span class="rvts8">Full RECT blit: Causes every blit operation to primary surface to be applied to the full surface (NULL rect coordinates). It could be handy to recover wrong surface handling, but this situation should be classifies more properly as a DxWnd BUG!</span></p>
<p class="rvps3"><span class="rvts8">Palette update don't blit: Avoid executing a plit operation in case of palette update. This could be used to fix conflicts between GDI and ddraw palette updates</span></p>
<p class="rvps3"><span class="rvts8">Set AERO compatible mode: Quite useful in Windows Vista to Win8 platforms, forces the program to declare its compatibility with AERO desktop mode, avoiding then the switch from AERO to standard desktop mode.</span></p>
<p class="rvps3"><span class="rvts8">Forces HEL: Forces Hardware Emulation Layer</span></p>
<p class="rvps3"><span class="rvts8">Win7 color fix: </span></p>
<p class="rvps3"><span class="rvts8">Don't fix the Pixel Format: Do not try to fix the surface pixel format</span></p>
<p class="rvps3"><span class="rvts8">By default set no ALPHACHANNEL: </span></p>
<p class="rvps3"><span class="rvts8">Fix ddraw ref counter: Decrement the reference counter of some objects to keep in proper account all service objects created internally by DxWnd</span></p>
<p class="rvps3"><span class="rvts8">Return 0 ref counter: Returns always a 0 reference counter when a surface / directdraw session is released</span></p>
<p class="rvps3"><span class="rvts8">Suppress D3D8/9 reset: Do not perform the D3D reset operation</span></p>
<p></p>
</div>
	
	<div id="topic_footer">

			<div id="topic_footer_content">
				Copyright &copy; 2016 by GHO. All Rights Reserved.</div>
		</div>
	</body>
	
</html>

